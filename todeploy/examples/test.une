#

USE _CLIMA_IP_ AS "192.168.7.246"


DEVICE downtimed_list
    DRIVER CellSetDriver
        CONFIG
            value SET list()


DEVICE clock
    DRIVER ClockDriver
        CONFIG
            interval SET 10m


DEVICE console
    DRIVER OutputDriver

DEVICE clima_sensor
    INIT
        delta    SET 0.4
       # downtime SET 27d
    DRIVER DaikinEmuraSensorsDriver
           CONFIG
               address  SET _CLIMA_IP_
               interval SET 1m

# DEVICE clima_ctrl
#     INIT
#         downtime SET 27d
#         value    SET pair():put( "power"   , false  ) \
#                            :put( "mode"    , "heat" ) \
#                            :put( "fan"     , "low"  ) \
#                            :put( "wings"   , "none" ) \
#                            :put( "t_target", 21     ) \
#                            :put( "h_target",  0     )
#     DRIVER DaikinEmuraControlDriver
#         CONFIG
#             address SET _CLIMA_IP_


WHEN clock > 0
THEN console = clima_sensor

# WHEN clock_30_min ABOVE  0 AND \
#      now:hour()   IS     7 AND \
#      now:minute() LEAST 30
# THEN ac_to_wakeup
# USE  now AS time()